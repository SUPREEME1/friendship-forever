const config = {
    cursor: "url('https://cdn.pixabay.com/photo/2016/05/06/22/16/heart-1374102_960_720.png'), auto",
    images: [
        "images/IMG-20250401-WA0024.jpg",
        "images/IMG-20250401-WA0023.jpg",
        "images/IMG-20250401-WA0022.jpg",
        "images/IMG-20250401-WA0021.jpg",
        "images/IMG-20250401-WA0020.jpg",
        "images/IMG-20250401-WA0019.jpg",
        "images/IMG-20250401-WA0018.jpg",
        "images/IMG-20250401-WA0016.jpg",
        "images/IMG-20250401-WA0017.jpg",
        "images/IMG-20250401-WA0015.jpg",
        "images/IMG-20250401-WA0014.jpg",
        "images/IMG-20250401-WA0012.jpg",
        "images/IMG-20250401-WA0011.jpg",
        "images/IMG-20250401-WA0010.jpg",
        "images/IMG-20250401-WA0009.jpg",
        "images/IMG-20250401-WA0008.jpg",
        "images/IMG-20250401-WA0007.jpg",
        "images/IMG-20250401-WA0006.jpg",
        "images/IMG-20250401-WA0005.jpg",
        "images/IMG-20250401-WA0004.jpg",
        "images/IMG-20250401-WA0003.jpg",
        "images/IMG-20250401-WA0013.jpg"
    ],
    songs: [
        { title: "Ordinary by Alex Warren", url: "https://songwhip.com/alex-warren/ordinary" },
        { title: "Survivor by Windy Shy", url: "https://songwhip.com/windy-shy/survivor" },
        { title: "Lost Boy by Ruth B", url: "https://songwhip.com/ruth-b/lost-boy" },
        { title: "Before You Go by Lewis Capaldi", url: "https://songwhip.com/lewis-capaldi/before-you-go" },
        { title: "September Song by JP Cooper", url: "https://songwhip.com/jp-cooper/september-song" }
    ],
    timeline: [
        { year: "2021", description: "Mandela Day marked the start of someting special - our friendship", image: "images/IMG-20250407-WA0002.jpg" },
        { year: "2022", description: "That year, our bond became something more - a friendship we promised to cherish, built on trust, laughter, and countless shared moments.", image: "images/IMG-20250331-WA0003.jpg" },
        { year: "2023", description: "Last day at camp, a quiet farewell to unforgettable memories. Here's to holding onto the laughter and stories we shared.", image: "images/IMG-20250407-WA0001.jpg" },
        { year: "2024", description: "First trip together", image: "images/IMG-20250401-WA0023.jpg" },
        { year: "2025", description: "To make more memories together", image: "images/IMG-20250407-WA0000.jpg" }
    ],
    questions: [
        {
            question: "If we were still in grade 12, which courses would she have chosen?",
            options: ["Music", "Computer Science", "Sound Engineering", "Drama"],
            answer: 1
        },
        {
            question: "What's her perfect way to spend a weekend?",
            options: ["Going out with friends", "Staying in and watching movies", 
                     "Exploring new places", "Sleeping and relaxing"],
            answer: 1
        },
        {
            question: "If she could master any skill instantly, what would it be?",
            options: ["Playing a musical instrument", "Cooking like a pro", 
                     "Speaking multiple languages", "Drawing or painting"],
            answer: 2
        },
        {
            question: "What's her go-to comfort movie or TV show?",
            options: ["A classic rom-com", "A crime/thriller series", 
                     "A feel-good sitcom", "A fantasy or sci-fi movie"],
            answer: 1
        },
        {
            question: "If she could only listen to one music genre for the rest of her life, what would it be?",
            options: ["Pop", "R&B/Soul", "Gospel", "Hip-hop/Rap"],
            answer: 0
        },
        {
            question: "What's a hobby or activity she has always wanted to try but hasn't yet?",
            options: ["Dancing", "Writing a book or blog", 
                     "Learning a new sport", "Photography"],
            answer: 1
        },
        {
            question: "Does she prefer books, movies, or podcasts? Why?",
            options: ["Books â€“ I love getting lost in a story", 
                     "Movies â€“ They bring stories to life visually",
                     "Podcasts â€“ I enjoy listening and learning",
                     "All of them, depending on my mood"],
            answer: 0
        },
        {
            question: "If she could travel anywhere in the world right now, where would you go?",
            options: ["Paris â€“ for romance and fashion", 
                     "Maldives â€“ for beaches and relaxation",
                     "Japan â€“ for the culture and food",
                     "South Africa â€“ to explore my own country more"],
            answer: 1
        },
        {
            question: "What kind of food she never gets tired of eating?",
            options: ["Pizza or burgers", "Traditional home-cooked meals",
                     "Sushi or seafood", "Desserts and sweets"],
            answer: 0
        },
        {
            question: "Is she more of a morning person or a night owl?",
            options: ["Morning person â€“ I love starting my day early",
                     "Night owl â€“ I'm most productive at night",
                     "Depends on the day",
                     "I just love sleep, morning or night"],
            answer: 2
        },
        {
            question: "If she could switch lives with any fictional character for a day, who would it be?",
            options: ["A superhero like Spider-Man or Wonder Woman",
                     "A princess or royal character",
                     "A genius detective like Sherlock Holmes",
                     "A magical character like Harry Potter"],
            answer: 3
        },
        {
            question: "If we could travel anywhere together, where would she choose?",
            options: ["Paris", "Tokyo", "New York", "Bali"],
            answer: 1
        },
        {
            question: "Which hobby has she always wanted to try but never did?",
            options: ["Photography", "Surfing", "Knitting", "Skydiving"],
            answer: 0
        },
        {
            question: "Whatâ€™s her ideal way to spend a rainy day?",
            options: ["Reading a book", "Watching movies", "Sleeping", "Dancing in the rain"],
            answer: 1
        },
        {
            question: "If she could switch lives with a celebrity for a day, who would she pick?",
            options: ["BeyoncÃ©", "Elon Musk", "Zendaya", "Rihanna"],
            answer: 2
        },
        {
            question: "Whatâ€™s her favorite childhood memory?",
            options: ["Winning an award", "Family vacation", "Meeting her best friend", "Her first pet"],
            answer: 2
        },
        {
            question: "What does she value most in a friendship?",
            options: ["Loyalty", "Honesty", "Sense of humor", "Deep conversations"],
            answer: 0
        },
        {
            question: "If she had a personal theme song, what genre would it be?",
            options: ["Pop", "Hip-Hop", "Rock", "Jazz"],
            answer: 3
        },
        {
            question: "Whatâ€™s something she always carries with her?",
            options: ["Lip balm", "A notebook", "Earphones", "Snacks"],
            answer: 2
        },
        {
            question: "If she could have dinner with any historical figure, who would it be?",
            options: ["Albert Einstein", "Maya Angelou", "Nelson Mandela", "Princess Diana"],
            answer: 1
        },
        {
            question: "Whatâ€™s her dream way to celebrate a special occasion?",
            options: ["Big party with friends", "A quiet getaway", "A concert", "A fancy dinner"],
            answer: 1
        },
        {
            question: "If she had to describe her personality as a color, what would it be?",
            options: ["Blue", "Yellow", "Red", "Purple"],
            answer: 0
        },
        {
            question: "Whatâ€™s her go-to drink order?",
            options: ["Coffee", "Tea", "Smoothie", "Iced Latte"],
            answer: 3
        },
        {
            question: "Whatâ€™s the one thing that instantly makes her happy?",
            options: ["Music", "Food", "Sunsets", "A good joke"],
            answer: 0
        },
        {
            question: "If she could master one skill instantly, what would it be?",
            options: ["Cooking", "Singing", "Public speaking", "Dancing"],
            answer: 2
        },
        {
            question: "Whatâ€™s the one thing she always says?",
            options: ["'I got this!'", "'Thatâ€™s crazy!'", "'Letâ€™s do it!'", "'I need coffee first'"],
            answer: 1
        },
        {
            question: "Which TV show could she rewatch forever?",
            options: ["Friends", "The Office", "Stranger Things", "Brooklyn Nine-Nine"],
            answer: 3
        },
        {
            question: "If she had to choose a dream job, what would it be?",
            options: ["Travel Blogger", "CEO", "Fashion Designer", "Therapist"],
            answer: 0
        },
        {
            question: "Whatâ€™s her hidden talent?",
            options: ["Singing", "Drawing", "Dancing", "Remembering random facts"],
            answer: 3
        },
        {
            question: "If she had to survive in the wild for a week, whatâ€™s the one thing sheâ€™d bring?",
            options: ["A tent", "A book", "A knife", "A solar-powered phone"],
            answer: 2
        },
        {
            question: "What does she believe is the key to a strong friendship?",
            options: ["Trust", "Shared memories", "Laughing together", "Being there in tough times"],
            answer: 3
        }
    
    ]
};

let state = {
    currentImageIndex: 0,
    currentQuestionIndex: 0,
    score: 0,
    quizCompleted: false
};

const elements = {
    imageGallery: document.getElementById('image-gallery'),
    questionElement: document.getElementById('question'),
    optionsContainer: document.getElementById('options'),
    resultContainer: document.getElementById('result'),
    retryButton: document.getElementById('retry'),
    nextButton: document.getElementById('next'),
    prevButton: document.getElementById('prev'),
    songsContainer: document.getElementById('songs-container'),
    timeline: document.getElementById('timeline')
};

let messages = JSON.parse(localStorage.getItem('friendshipMessages')) || [];

function init() {
    document.body.style.cursor = config.cursor;
    
    showImage(state.currentImageIndex);
    setInterval(showNextImage, 5000);
    
    displayQuestion();
    renderSongs();
    renderTimeline();
    
    elements.nextButton.addEventListener('click', showNextImage);
    elements.prevButton.addEventListener('click', showPrevImage);
    elements.retryButton.addEventListener('click', resetQuiz);
    
    if (!localStorage.getItem('friendshipMessages')) {
        localStorage.setItem('friendshipMessages', JSON.stringify([]));
    }
}

function showImage(index) {
    if (index < 0) {
        state.currentImageIndex = config.images.length - 1;
    } else if (index >= config.images.length) {
        state.currentImageIndex = 0;
    } else {
        state.currentImageIndex = index;
    }
    
    elements.imageGallery.style.backgroundImage = `url(${config.images[state.currentImageIndex]})`;
}

function showNextImage() {
    showImage(state.currentImageIndex + 1);
}

function showPrevImage() {
    showImage(state.currentImageIndex - 1);
}

function displayQuestion() {
    if (state.currentQuestionIndex < config.questions.length) {
        const question = config.questions[state.currentQuestionIndex];
        elements.questionElement.textContent = question.question;
        elements.optionsContainer.innerHTML = '';
        
        question.options.forEach((option, index) => {
            const button = document.createElement('button');
            button.textContent = option;
            button.addEventListener('click', () => checkAnswer(index));
            elements.optionsContainer.appendChild(button);
        });
        
        elements.resultContainer.textContent = '';
        elements.retryButton.style.display = 'none';
    } else {
        showResults();
    }
}

function checkAnswer(selectedIndex) {
    const question = config.questions[state.currentQuestionIndex];
    
    if (selectedIndex === question.answer) {
        state.score++;
    }
    
    state.currentQuestionIndex++;
    displayQuestion();
}

function showResults() {
    const percentage = Math.round((state.score / config.questions.length) * 100);
    let message = `Your Score: ${state.score}/${config.questions.length} (${percentage}%)`;
    
    if (percentage === 100) {
        message += "\nPerfect! You know your friend extremely well!";
        triggerConfetti();
    } else if (percentage >= 70) {
        message += "\nGreat job! You know your friend pretty well!";
    } else if (percentage >= 50) {
        message += "\nNot bad! You know some things about your friend!";
    } else {
        message += "\nHmm... maybe spend more time with your friend!";
    }
    
    elements.questionElement.textContent = "Quiz Completed!";
    elements.optionsContainer.innerHTML = '';
    elements.resultContainer.textContent = message;
    elements.retryButton.style.display = 'block';
    state.quizCompleted = true;
}

function resetQuiz() {
    state.currentQuestionIndex = 0;
    state.score = 0;
    state.quizCompleted = false;
    displayQuestion();
}

function renderSongs() {
    config.songs.forEach(song => {
        const songElement = document.createElement('div');
        songElement.className = 'song';
        
        const songLink = document.createElement('a');
        songLink.href = song.url;
        songLink.target = '_blank';
        songLink.textContent = song.title;
        
        const playButton = document.createElement('button');
        playButton.className = 'play-button';
        playButton.innerHTML = '<i class="fas fa-play"></i>';
        playButton.addEventListener('click', () => {
            window.open(song.url, '_blank');
        });
        
        songElement.appendChild(songLink);
        songElement.appendChild(playButton);
        elements.songsContainer.appendChild(songElement);
    });
}

function renderTimeline() {
    config.timeline.forEach(event => {
        const eventElement = document.createElement('div');
        eventElement.className = 'timeline-event';

        const marker = document.createElement('div');
        marker.className = 'timeline-marker';
        marker.innerHTML = '<i class="fas fa-heart"></i>';

        const content = document.createElement('div');
        content.className = 'timeline-content';

        const dateElement = document.createElement('div');
        dateElement.className = 'timeline-date';
        dateElement.textContent = event.year;

        const textElement = document.createElement('div');
        textElement.className = 'timeline-text';
        textElement.textContent = event.description;

        const imageElement = document.createElement('img');
        imageElement.src = event.image;
        imageElement.alt = `Image for ${event.description}`;
        imageElement.className = 'timeline-image';

        content.appendChild(dateElement);
        content.appendChild(textElement);
        content.appendChild(imageElement);

        eventElement.appendChild(marker);
        eventElement.appendChild(content);
        elements.timeline.appendChild(eventElement);
    });
}

function triggerConfetti() {
    const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff'];
    
    for (let i = 0; i < 100; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.left = `${Math.random() * 100}vw`;
        confetti.style.animationDuration = `${Math.random() * 3 + 2}s`;
        document.body.appendChild(confetti);
        
        setTimeout(() => {
            confetti.remove();
        }, 5000);
    }
}

function saveMessage() {
    const input = document.getElementById('messageInput');
    const message = input.value.trim();
    
    if (message) {
        messages.push({
            text: message,
            date: new Date().toLocaleString(),
            author: "Anonymous Friend"
        });
        localStorage.setItem('friendshipMessages', JSON.stringify(messages));
        input.value = '';
        alert('ðŸ’– Message saved to our memory vault!');
    } else {
        alert('Please write a message before saving!');
    }
}

function generatePDF() {
    if (messages.length === 0) {
        alert('No messages to save yet! Start writing some sweet notes!');
        return;
    }

    const doc = new jspdf.jsPDF();
    doc.setFont('helvetica');
    
    // Add cover page
    doc.setFontSize(32);
    doc.setTextColor(255, 105, 180);
    doc.text("Friendship Memories", 20, 30);
    doc.addImage(config.images[0], 'JPEG', 20, 50, 170, 100);
    
    // Messages page
    doc.addPage();
    doc.setFontSize(18);
    doc.setTextColor(0, 0, 0);
    doc.text("Sweet Messages Collection", 20, 20);
    
    let yPos = 30;
    messages.forEach((msg, index) => {
        doc.setFontSize(12);
        doc.setTextColor(219, 112, 147);
        doc.text(`Message #${index + 1} - ${msg.date}`, 20, yPos);
        doc.setTextColor(0, 0, 0);
        doc.text(msg.text, 20, yPos + 5, { maxWidth: 170 });
        yPos += 25;
        
        if (yPos > 280) {
            doc.addPage();
            yPos = 20;
        }
    });

    // Add final page
    doc.addPage();
    doc.setFontSize(24);
    doc.setTextColor(255, 105, 180);
    doc.text("Friendship Forever ðŸ’–", 60, 140);
    
    doc.save('Friendship_Memories.pdf');
}

document.addEventListener('DOMContentLoaded', init);
